/*! timer.jquery 0.2.0 2014-11-09*/(function(t){var s=function(s,i){var e={editable:!0,restart:!1,repeat:!1};this.options=t.extend(e,i),this.$el=t(s),this.element=s,this.init()};s.prototype.init=function(){this.initSecs=0,this.secsNum=0,this.minsNum=0,this.hrsNum=0,this.secsStr="0",this.minsStr="",this.hrsStr="",this.timerId=null,this.delay=1e3,this.isTimerRunning=!1,void 0!==this.options.seconds&&(this.hrsNum=Math.floor(this.options.seconds/3600),this.minsNum=Math.floor((this.options.seconds-3600*this.hrsNum)/60),this.secsNum=this.options.seconds-3600*this.hrsNum-60*this.minsNum,this.timeToString()),this.elType=this.$el.prop("tagName").toLowerCase(),this.options.editable&&this.initEditable(),this.options.duration&&(this.duration=this.options.duration=this.convertToSeconds(this.options.duration))},s.prototype.convertToSeconds=function(t){if(!isNaN(Number(t)))return t;t=t.toLowerCase();var s=0;return t.replace(/((\d{1,2}h)|(\d{1,2}m)|(\d{1,2}s))/,function(t,i,e,n,h){e&&(s+=3600*Number(e.replace("h",""))),n&&(s+=60*Number(n.replace("m",""))),h&&(s+=Number(h.replace("s","")))}),s},s.prototype.start=function(){this.isTimerRunning||(this.updateTimerDisplay(),this.initSecs=Math.round((new Date).getTime()/1e3)-1,this.incrementTime(),this.startTimerInterval(),this.updateTimerDisplay())},s.prototype.pause=function(){clearInterval(this.timerId),this.isTimerRunning=!1},s.prototype.resume=function(){this.isTimerRunning||(this.initSecs=Math.round((new Date).getTime()/1e3)-this.secsNum,this.startTimerInterval())},s.prototype.remove=function(){this.pause(),clearTimeout(this.timeOutId),this.$el.data("plugin_"+i,null),this.$el.data("seconds",null)},s.prototype.startTimerInterval=function(){var t=this;this.timerId=setInterval(function(){t.incrementTime()},this.delay),this.isTimerRunning=!0},s.prototype.initEditable=function(){var s=this;this.$el.on("focus",function(){s.pause()}),this.$el.on("blur",function(){var i,e;i="input"===s.elType||"textarea"===s.elType?t(this).val().replace(/\s+/,""):t(this).html().replace(/\s+/,"");var n=/\d+sec/,h=/\d+\:\d+min/,r=/\d+\:\d+\:\d+/;i.match(n)?(s.secsNum=parseInt(i.replace(/sec/,""),10)+1,s.secsNum>59&&(s.secsNum=0,s.minsNum++)):i.match(h)?(i=i.replace(/min/,""),e=i.split(":"),s.minsNum=parseInt(e[0],10),s.secsNum=parseInt(e[1],10)+1,s.secsNum>59&&(s.secsNum=0,s.minsNum++),s.minsNum>59&&(s.minsNum=0,s.hrsNum++)):i.match(r)&&(e=i.split(":"),s.hrsNum=parseInt(e[0],10),s.minsNum=parseInt(e[1],10),s.secsNum=parseInt(e[2],10)+1,s.secsNum>59&&(s.secsNum=0,s.minsNum++),s.minsNum>59&&(s.minsNum=0,s.hrsNum++)),s.initSecs=Math.round((new Date).getTime()/1e3)-s.secsNum,s.resume()})},s.prototype.updateTimerDisplay=function(){var t;t=0===this.hrsNum?60>this.secsNum&&0===this.minsNum?this.secsStr+" sec":this.minsStr+":"+this.secsStr+" min":this.hrsStr+":"+this.minsStr+":"+this.secsStr,"input"===this.elType||"textarea"===this.elType?this.$el.val(t):this.$el.html(t),this.$el.data("seconds",this.get_seconds())},s.prototype.timeToString=function(){this.secsStr=(this.minsNum>0||this.hrsNum>0)&&10>this.secsNum?"0"+this.secsNum:this.secsNum,this.minsStr=this.hrsNum>0&&10>this.minsNum?"0"+this.minsNum:this.minsNum,this.hrsStr=this.hrsNum},s.prototype.get_seconds=function(){return 3600*this.hrsNum+60*this.minsNum+this.secsNum},s.prototype.notify=function(){this.options.callback?this.options.callback():alert("Time up!")},s.prototype.incrementTime=function(){this.timeToString(),this.updateTimerDisplay(),this.$el.data("seconds")===this.duration&&(this.notify(),this.options.repeat===!0&&(this.duration+=this.options.duration));var t=Math.round((new Date).getTime()/1e3)-this.initSecs;this.secsNum=t,0===this.secsNum%60&&(this.minsNum++,this.secsNum=0,this.initSecs=Math.round((new Date).getTime()/1e3)),this.minsNum>59&&0===this.minsNum%60&&(this.hrsNum++,this.minsNum=0)};var i="timer";t.fn[i]=function(e){return e=e||"start",this.each(function(){t.data(this,"plugin_"+i)instanceof s||t.data(this,"plugin_"+i,new s(this,e));var n=t.data(this,"plugin_"+i);"string"==typeof e&&"function"==typeof n[e]&&n[e].call(n),"object"==typeof e&&n.start.call(n,e)})}})(jQuery);